{{- if .Values.clusterAdminRole.create -}}
  {{- if not (lookup "rbac.authorization.k8s.io/v1" "ClusterRole" "" .Values.clusterAdminRole.name) }}
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: {{ .Values.clusterAdminRole.name }}
  labels:
    {{- include "namespace-bootstrap.labels" . | nindent 4 }}
  {{- with .Values.clusterAdminRole.annotations }}
  annotations:
    {{- toYaml . | nindent 4 }}
  {{- end }}
rules:
- apiGroups: [""] # "" indicates the core API group
  resources:
  - componentstatuses
  - deployments
  - replicasets
  - pods
  - services
  - daemonsets
  - statefulset
  - jobs
  - cronjobs
  - secrets
  - configmaps
  - ingresses
  - serviceaccounts
  - resourcequotas
  - bindings
  - endpoints
  - events
  - namespaces
  - limitranges
  - nodes 
  - persistentvolumeclaims
  - persistentvolumes
  - pods
  - podtemplates 
  - replicationcontrollers 
  - mutatingwebhookconfigurations 
  - validatingwebhookconfigurations 
  - customresourcedefinitions
  - controllerrevisions 
  - tokenreviews
  - localsubjectaccessreviews
  - selfsubjectaccessreviews
  - selfsubjectrulesreviews
  - subjectaccessreviews
  - horizontalpodautoscalers
  - certificatesigningrequests
  - leases
  - endpointslices
  - flowschemas
  - prioritylevelconfigurations 
  - ingressclasses 
  - ingresses 
  - networkpolicies
  - runtimeclasses 
  - poddisruptionbudgets
  - podsecuritypolicies
  - clusterrolebindings
  - clusterroles
  - rolebindings 
  - roles 
  - priorityclasses
  - volumesnapshotclasses
  - volumesnapshotcontents 
  - volumesnapshots
  - storageclasses 
  - volumeattachments
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
  - deletecollection
  {{- end }}
{{- end }}
